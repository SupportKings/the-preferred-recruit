{
  "version": 3,
  "sources": ["../../../src/lib/helpers.ts"],
  "sourcesContent": ["/**\n * Utility functions for data transformation\n */\n\n/**\n * Convert \"-\" or empty values to null\n */\nexport function nullifyEmptyString(value: string | null | undefined): string | null {\n\tif (!value || value === \"-\" || value.trim() === \"\") {\n\t\treturn null;\n\t}\n\treturn value;\n}\n\n/**\n * Safely merge update object by removing null/undefined values\n * This prevents overriding existing data with null values\n */\nexport function removeNullValues<T extends Record<string, any>>(obj: T): Partial<T> {\n\tconst cleaned: Partial<T> = {};\n\n\tfor (const [key, value] of Object.entries(obj)) {\n\t\t// Only include non-null and non-undefined values\n\t\tif (value !== null && value !== undefined) {\n\t\t\tcleaned[key as keyof T] = value;\n\t\t}\n\t}\n\n\treturn cleaned;\n}\n\n/**\n * Parse percentile range like \"600-700\" into min/max values\n */\nexport function parsePercentileRange(\n\tvalue: string | null,\n): { min: number | null; max: number | null } {\n\tif (!value || value === \"-\") {\n\t\treturn { min: null, max: null };\n\t}\n\n\tconst parts = value.split(\"-\").map((p) => p.trim());\n\tif (parts.length !== 2) {\n\t\treturn { min: null, max: null };\n\t}\n\n\tconst min = Number.parseInt(parts[0], 10);\n\tconst max = Number.parseInt(parts[1], 10);\n\n\treturn {\n\t\tmin: Number.isNaN(min) ? null : min,\n\t\tmax: Number.isNaN(max) ? null : max,\n\t};\n}\n\n/**\n * Parse percentage string like \"45%\" to decimal 0.45\n */\nexport function parsePercentage(value: string | null): number | null {\n\tif (!value || value === \"-\") return null;\n\n\tconst cleaned = value.replace(\"%\", \"\").trim();\n\tconst num = Number.parseFloat(cleaned);\n\n\tif (Number.isNaN(num)) return null;\n\n\t// If already in decimal form (0-1), return as-is\n\tif (num <= 1) return num;\n\n\t// Otherwise convert percentage to decimal\n\treturn num / 100;\n}\n\n/**\n * Parse integer from string, return null if invalid\n */\nexport function parseInteger(value: string | null): number | null {\n\tif (!value || value === \"-\") return null;\n\n\tconst cleaned = value.replace(/,/g, \"\").trim();\n\tconst num = Number.parseInt(cleaned, 10);\n\n\treturn Number.isNaN(num) ? null : num;\n}\n\n/**\n * Parse float from string, return null if invalid\n */\nexport function parseFloat(value: string | null): number | null {\n\tif (!value || value === \"-\") return null;\n\n\tconst cleaned = value.replace(/,/g, \"\").trim();\n\tconst num = Number.parseFloat(cleaned);\n\n\treturn Number.isNaN(num) ? null : num;\n}\n\n/**\n * Map division sheet name to division name\n */\nexport function mapDivisionCode(sheetName: string): string {\n\tconst mapping: Record<string, string> = {\n\t\tDI: \"DI\",\n\t\tDII: \"DII\",\n\t\tDIII: \"DIII\",\n\t\tJuCo: \"JuCo\",\n\t\tNAIA: \"NAIA\",\n\t};\n\n\treturn mapping[sheetName] || sheetName;\n}\n\n/**\n * Derive event group from responsibility text\n * Returns array of event groups found in the text (lowercase to match DB enum)\n */\nexport function parseEventGroups(\n\tresponsibilities: string | null,\n): Array<\"sprints\" | \"distance\" | \"throws\" | \"jumps\" | \"hurdles\" | \"relays\" | \"combined\"> {\n\tif (!responsibilities) return [];\n\n\tconst text = responsibilities.toLowerCase();\n\tconst groups: Set<string> = new Set();\n\n\tif (text.includes(\"sprint\") || text.includes(\"100\") || text.includes(\"200\") || text.includes(\"400\")) {\n\t\tgroups.add(\"sprints\");\n\t}\n\tif (text.includes(\"distance\") || text.includes(\"800\") || text.includes(\"1500\") || text.includes(\"mile\") || text.includes(\"3000\") || text.includes(\"5000\") || text.includes(\"10000\") || text.includes(\"xc\") || text.includes(\"cross country\")) {\n\t\tgroups.add(\"distance\");\n\t}\n\tif (text.includes(\"throw\") || text.includes(\"shot\") || text.includes(\"discus\") || text.includes(\"javelin\") || text.includes(\"hammer\")) {\n\t\tgroups.add(\"throws\");\n\t}\n\tif (text.includes(\"jump\") || text.includes(\"long jump\") || text.includes(\"triple\") || text.includes(\"high jump\") || text.includes(\"pole vault\")) {\n\t\tgroups.add(\"jumps\");\n\t}\n\tif (text.includes(\"hurdle\") || text.includes(\"110h\") || text.includes(\"400h\") || text.includes(\"100h\")) {\n\t\tgroups.add(\"hurdles\");\n\t}\n\tif (text.includes(\"relay\") || text.includes(\"4x1\") || text.includes(\"4x4\")) {\n\t\tgroups.add(\"relays\");\n\t}\n\tif (text.includes(\"multi\") || text.includes(\"heptathlon\") || text.includes(\"decathlon\") || text.includes(\"pentathlon\") || text.includes(\"combined\") || text.includes(\"all events\")) {\n\t\tgroups.add(\"combined\");\n\t}\n\n\treturn Array.from(groups) as Array<\"sprints\" | \"distance\" | \"throws\" | \"jumps\" | \"hurdles\" | \"relays\" | \"combined\">;\n}\n\n/**\n * Derive primary specialty from responsibilities text\n * Returns the first/main event group\n */\nexport function derivePrimarySpecialty(\n\tresponsibilities: string | null,\n): \"sprints\" | \"distance\" | \"throws\" | \"jumps\" | \"hurdles\" | \"relays\" | \"combined\" | null {\n\tconst groups = parseEventGroups(responsibilities);\n\treturn groups.length > 0 ? groups[0] : null;\n}\n\n/**\n * Parse specific event names from responsibilities text\n * Returns array of event names like \"100m\", \"Shot Put\", \"Pole Vault\"\n */\nexport function parseSpecificEvents(responsibilities: string | null): string[] {\n\tif (!responsibilities) return [];\n\n\tconst text = responsibilities.toLowerCase();\n\tconst events: string[] = [];\n\n\t// Sprint events\n\tif (text.includes(\"100m\") || text.includes(\"100 m\")) events.push(\"100m\");\n\tif (text.includes(\"200m\") || text.includes(\"200 m\")) events.push(\"200m\");\n\tif (text.includes(\"400m\") || text.includes(\"400 m\")) events.push(\"400m\");\n\n\t// Distance events\n\tif (text.includes(\"800m\") || text.includes(\"800 m\")) events.push(\"800m\");\n\tif (text.includes(\"1500m\") || text.includes(\"1500 m\") || text.includes(\"mile\")) events.push(\"1500m\");\n\tif (text.includes(\"3000m\") || text.includes(\"3000 m\") || text.includes(\"steeplechase\")) events.push(\"3000m Steeplechase\");\n\tif (text.includes(\"5000m\") || text.includes(\"5000 m\") || text.includes(\"5k\")) events.push(\"5000m\");\n\tif (text.includes(\"10000m\") || text.includes(\"10000 m\") || text.includes(\"10k\")) events.push(\"10000m\");\n\n\t// Hurdles\n\tif (text.includes(\"110h\") || text.includes(\"110m hurdles\")) events.push(\"110m Hurdles\");\n\tif (text.includes(\"100h\") || text.includes(\"100m hurdles\")) events.push(\"100m Hurdles\");\n\tif (text.includes(\"400h\") || text.includes(\"400m hurdles\")) events.push(\"400m Hurdles\");\n\n\t// Jumps\n\tif (text.includes(\"long jump\")) events.push(\"Long Jump\");\n\tif (text.includes(\"triple jump\")) events.push(\"Triple Jump\");\n\tif (text.includes(\"high jump\")) events.push(\"High Jump\");\n\tif (text.includes(\"pole vault\")) events.push(\"Pole Vault\");\n\n\t// Throws\n\tif (text.includes(\"shot put\") || text.includes(\"shot\")) events.push(\"Shot Put\");\n\tif (text.includes(\"discus\")) events.push(\"Discus\");\n\tif (text.includes(\"javelin\")) events.push(\"Javelin\");\n\tif (text.includes(\"hammer\")) events.push(\"Hammer Throw\");\n\n\t// Multis\n\tif (text.includes(\"decathlon\")) events.push(\"Decathlon\");\n\tif (text.includes(\"heptathlon\")) events.push(\"Heptathlon\");\n\tif (text.includes(\"pentathlon\")) events.push(\"Pentathlon\");\n\n\t// Relays\n\tif (text.includes(\"4x100\") || text.includes(\"4x1\")) events.push(\"4x100m Relay\");\n\tif (text.includes(\"4x400\") || text.includes(\"4x4\")) events.push(\"4x400m Relay\");\n\n\treturn events;\n}\n"],
  "mappings": "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",
  "names": []
}
